<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>联合营销平台 - 活动优惠券管理需求说明文档</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        
        header {
            text-align: center; 
            margin-bottom: 30pt; 
            border-bottom: 3pt solid #007bff; 
            padding-bottom: 20pt;
        }
        
        h1, h2, h3, h4 {
            margin-top: 0;
        }
        
        h1 {
            font-size: 20pt; 
            color: #2c3e50; 
            border-bottom: 2px solid #007bff; 
            padding-bottom: 10pt; 
            margin-top: 20pt;
            margin-bottom: 15pt;
            page-break-after: avoid;
        }
        
        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        section {
            background: white;
            margin-bottom: 2rem;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        h2 {
            color: #007bff;
            border-bottom: 2px solid #007bff;
            padding-bottom: 0.5rem;
        }
        
        h3 {
            color: #495057;
        }
        
        h4 {
            color: #333;
            margin-top: 1.5rem;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        
        th, td {
            border: 1px solid #dee2e6;
            padding: 0.75rem;
            text-align: left;
        }
        
        th {
            background-color: #e9ecef;
            font-weight: bold;
        }
        
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .prototype-btn {
            display: inline-block;
            padding: 1rem 2rem;
            background-color: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            margin: 1rem 0;
            font-size: 16px;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);
            transition: all 0.3s ease;
        }
        
        .prototype-btn:hover {
            background-color: #0056b3;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 123, 255, 0.4);
            text-decoration: none;
            color: white;
        }
        
        .function-link {
            display: inline-block;
            padding: 8px 16px;
            background-color: #e3f2fd;
            color: #1976d2;
            text-decoration: none;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            margin: 8px 4px;
            border: 2px solid #bbdefb;
            box-shadow: 0 2px 8px rgba(25, 118, 210, 0.2);
            transition: all 0.3s ease;
        }

        .function-link:hover {
            background-color: #1976d2;
            color: white;
            text-decoration: none;
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(25, 118, 210, 0.3);
        }

        .field-constraint {
            background-color: #fff3e0;
            padding: 8px;
            border-left: 4px solid #ff9800;
            margin: 8px 0;
            font-size: 14px;
        }

        .workflow-step {
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 10px;
            background-color: #f5f5f5;
            border-radius: 4px;
        }

        .workflow-step .step-number {
            background-color: #007bff;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            margin-right: 10px;
            flex-shrink: 0;
        }

        .dev-note {
            background-color: #fff8e1;
            border: 1px solid #ffc107;
            padding: 12px;
            border-radius: 4px;
            margin: 10px 0;
        }

        .dev-note-title {
            font-weight: bold;
            color: #f57f17;
            margin-bottom: 8px;
        }
        
        .prototype-preview {
            text-align: center;
            margin: 2rem 0;
            padding: 1rem;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .prototype-preview img {
            max-width: 100%;
            height: auto;
            border: 1px solid #dee2e6;
            border-radius: 4px;
        }
        
        .prototype-preview figcaption {
            margin-top: 1rem;
            color: #666;
            font-style: italic;
        }
        
        footer {
            text-align: center;
            margin-top: 2rem;
            padding: 1rem;
            color: #666;
            font-size: 0.9em;
        }
        .warning-box { 
            background-color: #fff3cd; 
            border: 1pt solid #ffeaa7; 
            padding: 10pt; 
            margin: 10pt 0; 
        }
        .success-box { 
            background-color: #d4edda; 
            border: 1pt solid #c3e6cb; 
            padding: 10pt; 
            margin: 10pt 0; 
        }
        .header { 
            text-align: center; 
            margin-bottom: 30pt; 
            border-bottom: 3pt solid #007bff; 
            padding-bottom: 20pt;
        }
        .meta { 
            color: #666; 
            font-size: 12pt; 
            margin-top: 10pt;
        }
        .footer { 
            text-align: center; 
            margin-top: 30pt; 
            border-top: 2pt solid #ccc; 
            padding-top: 20pt; 
            color: #666; 
            font-size: 12pt;
        }
        .api-endpoint { 
            background-color: #28a745; 
            color: white; 
            padding: 4pt 8pt; 
            font-family: 'Courier New', monospace; 
            font-size: 12pt;
        }
        .parameter-list { 
            background-color: #f8f9fa; 
            padding: 8pt; 
            margin: 8pt 0; 
            border-left: 3pt solid #007bff;
        }
        .url-link {
            color: #0066cc;
            text-decoration: underline;
            font-family: 'Courier New', monospace;
            font-size: 12pt;
        }
        /* 图表容器样式 */
        .chart-container {
            position: relative;
            width: 100%;
            min-height: 500px;
            height: auto;
            border: 1px solid #ddd;
            margin: 10pt 0;
        }
        .chart-placeholder {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            background-color: #f8f9fa;
            color: #666;
            font-style: italic;
        }
        @page {
            margin: 1in 10% 1in 10%;
        }
        @media print {
            body { margin: 1in 10% 1in 10%; }
        }
    </style>
</head>
<body>
    <header>
        <h1>银行联合营销平台 - 微信活动管理需求说明文档</h1>
        <p class="subtitle">基于原型界面的详细功能需求与开发指南</p>
    </header>
    
    <!-- 原型图片预览 -->
    <figure class="prototype-preview">
        <img src="image/promotion_preview.png" alt="活动优惠券管理系统原型预览">
        <figcaption>活动优惠券管理系统原型界面预览 - <a href="promotion_prototype.html" target="_blank" class="prototype-btn">查看完整原型</a></figcaption>
    </figure>

    <section>
        <h2>1. 系统概述</h2>
        <p>银行联合营销平台微信活动管理系统是一个基于Web的企业级营销活动管理平台，主要用于管理微信优惠券营销活动的全生命周期。系统提供活动创建、查询、编辑、状态管理等核心功能，支持批量操作和多维度数据筛选。</p>
        
        <h3>1.1 核心功能模块</h3>
        <p>系统包含以下主要功能模块：</p>
        <ul>
            <li><strong>活动管理</strong>：新增、编辑、查看、暂停/启用活动优惠券</li>
            <li><strong>查询筛选</strong>：支持多维度条件查询和智能筛选</li>
            <li><strong>批量操作</strong>：支持批量暂停、导出等操作</li>
            <li><strong>数据查看</strong>：查看活动详情、使用规则等信息</li>
        </ul>
    </section>
    
    <section>
        <h2>2. 查询筛选功能</h2>
        <a href="promotion_prototype.html" target="_blank" class="function-link">🔍 体验查询筛选功能</a>
        
        <h3>2.1 功能描述</h3>
        <p>系统提供多维度的活动查询筛选功能，支持精确查找和模糊搜索，帮助用户快速定位目标活动。</p>

        <h3>2.2 筛选字段</h3>
        <table>
            <thead>
                <tr>
                    <th>字段名称</th>
                    <th>字段类型</th>
                    <th>查询方式</th>
                    <th>是否必填</th>
                    <th>字段限制</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>活动名称</td>
                    <td>文本输入</td>
                    <td>模糊匹配</td>
                    <td>否</td>
                    <td>最大长度100字符</td>
                </tr>
                <tr>
                    <td>主题活动ID</td>
                    <td>文本输入</td>
                    <td>精确匹配</td>
                    <td>否</td>
                    <td>最大长度50字符，支持数字和字母</td>
                </tr>
                <tr>
                    <td>批次号</td>
                    <td>文本输入</td>
                    <td>精确匹配</td>
                    <td>否</td>
                    <td>9位数字</td>
                </tr>
                <tr>
                    <td>通道</td>
                    <td>下拉选择</td>
                    <td>精确匹配</td>
                    <td>否</td>
                    <td>微信支付/支付宝/云闪付</td>
                </tr>
                <tr>
                    <td>渠道</td>
                    <td>下拉选择</td>
                    <td>精确匹配</td>
                    <td>否</td>
                    <td>从预设渠道列表选择</td>
                </tr>
                <tr>
                    <td>报名机构</td>
                    <td>下拉搜索</td>
                    <td>精确匹配</td>
                    <td>否</td>
                    <td>从预设机构列表选择</td>
                </tr>
                <tr>
                    <td>状态</td>
                    <td>下拉选择</td>
                    <td>精确匹配</td>
                    <td>否</td>
                    <td>生效中/已终止/全部</td>
                </tr>
                <tr>
                    <td>活动时间</td>
                    <td>日期范围</td>
                    <td>范围查询</td>
                    <td>否</td>
                    <td>开始时间不能晚于结束时间</td>
                </tr>
            </tbody>
        </table>
        
        <div class="field-constraint">
            <strong>字段约束说明：</strong>
            <ul>
                <li>批次号：9位数字，用于区分同一活动的不同批次</li>
                <li>机构下拉框支持输入搜索，实时过滤匹配项</li>
                <li>日期选择器默认格式为YYYY-MM-DD</li>
                <li>所有文本输入框支持中英文和数字</li>
            </ul>
        </div>

        <h3>2.3 业务流程</h3>
        <div class="workflow-step">
            <div class="step-number">1</div>
            <div>用户在筛选区域输入查询条件</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">2</div>
            <div>系统进行前端字段验证（格式、长度等）</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">3</div>
            <div>点击查询按钮，系统发送查询请求</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">4</div>
            <div>后端处理查询条件，返回匹配的活动列表</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">5</div>
            <div>前端更新表格显示查询结果</div>
        </div>
    </section>
    
    <section>
        <h2>3. 新增活动功能</h2>
        <a href="promotion_prototype.html" target="_blank" class="function-link">➕ 体验新增活动功能</a>
                
        <h3>3.1 功能概述</h3>
        <p>系统提供新增微信活动的功能，允许管理员创建新的微信优惠券营销活动。新增活动包括填写活动基本信息、配置优惠券规则、设置使用限制等。</p>
                
        <h3>3.2 界面设计</h3>
        <p>新增活动功能通过弹出模态框实现，包含以下元素：</p>
        <ul>
            <li><strong>模态框</strong>：覆盖整个屏幕，包含表单内容和操作按钮</li>
            <li><strong>关闭按钮</strong>：右上角"×"按钮，用于关闭模态框</li>
            <li><strong>表单区域</strong>：包含活动信息输入字段</li>
            <li><strong>操作按钮</strong>：包括"取消"和"确定"按钮</li>
        </ul>
        
        <h3>3.3 表单字段</h3>
        <p>新增活动表单包含以下字段：</p>
        <table>
            <thead>
                <tr>
                    <th>字段名称</th>
                    <th>字段类型</th>
                    <th>必填</th>
                    <th>约束条件</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>活动名称</td>
                    <td>文本输入框</td>
                    <td>是</td>
                    <td>最大100字符，用于业务识别，不能重复</td>
                </tr>
                <tr>
                    <td>主题活动ID</td>
                    <td>文本输入框</td>
                    <td>是</td>
                    <td>关联主题活动表，格式THEME+数字</td>
                </tr>
                <tr>
                    <td>批次号</td>
                    <td>文本输入框</td>
                    <td>是</td>
                    <td>9位数字，用于区分同一活动的不同批次</td>
                </tr>
                <tr>
                    <td>生效时间</td>
                    <td>日期时间选择器</td>
                    <td>是</td>
                    <td>不能选择过去时间，格式YYYY-MM-DD HH:mm:ss</td>
                </tr>
                <tr>
                    <td>失效时间</td>
                    <td>日期时间选择器</td>
                    <td>是</td>
                    <td>必须晚于生效时间，格式YYYY-MM-DD HH:mm:ss</td>
                </tr>
                <tr>
                    <td>通道</td>
                    <td>下拉选择框</td>
                    <td>是</td>
                    <td>可选：微信支付、支付宝、云闪付（编辑时禁用）</td>
                </tr>
                <tr>
                    <td>渠道</td>
                    <td>下拉选择框</td>
                    <td>是</td>
                    <td>从预设渠道列表选择（编辑时禁用）</td>
                </tr>
                <tr>
                    <td>报名机构</td>
                    <td>文本输入框</td>
                    <td>是</td>
                    <td>示例：拉卡拉支付股份有限公司</td>
                </tr>
                <tr>
                    <td>优惠券类型</td>
                    <td>单选按钮组</td>
                    <td>是</td>
                    <td>可选：满减券、折扣券、代金券</td>
                </tr>
                <tr>
                    <td>面值</td>
                    <td>数值输入框</td>
                    <td>是</td>
                    <td>最多支持小数点后2位</td>
                </tr>
                <tr>
                    <td>使用门槛</td>
                    <td>数值输入框</td>
                    <td>否</td>
                    <td>最多支持小数点后2位，0表示无门槛</td>
                </tr>
                <tr>
                    <td>使用规则</td>
                    <td>文本域</td>
                    <td>是</td>
                    <td>详细描述优惠券的使用规则和限制条件</td>
                </tr>
                <tr>
                    <td>使用周期</td>
                    <td>单选按钮组</td>
                    <td>是</td>
                    <td>可选：固定天数、指定日期范围</td>
                </tr>
                <tr>
                    <td>是否在小程序显示</td>
                    <td>单选按钮组</td>
                    <td>是</td>
                    <td>可选：是、否</td>
                </tr>
            </tbody>
        </table>
                
        <h3>3.4 表单验证规则</h3>
        <p>系统对用户输入进行实时验证：</p>
        <ul>
            <li><strong>必填字段验证</strong>：所有必填字段为空时显示错误提示</li>
            <li><strong>格式验证</strong>：日期时间格式、数值格式、字符长度等</li>
            <li><strong>业务逻辑验证</strong>：失效时间必须晚于生效时间</li>
            <li><strong>唯一性验证</strong>：活动名称不能重复</li>
            <li><strong>字段约束验证</strong>：通道和渠道在编辑模式下禁用修改</li>
            <li><strong>数值精度验证</strong>：面值和使用门槛支持小数点后2位</li>
        </ul>
        
        <h3>3.5 操作流程</h3>
        <div class="workflow-step">
            <div class="step-number">1</div>
            <div>用户点击"新增活动"按钮</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">2</div>
            <div>系统弹出新增活动模态框</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">3</div>
            <div>用户填写活动信息（所有字段可编辑）</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">4</div>
            <div>系统实时验证用户输入</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">5</div>
            <div>用户点击"确定"按钮</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">6</div>
            <div>系统验证所有字段</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">7</div>
            <div>验证通过后保存活动信息并关闭模态框</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">8</div>
            <div>刷新活动列表显示新增的活动</div>
        </div>
                
    </section>
    
    <section>
        <h2>4. 编辑活动功能</h2>
        <a href="promotion_prototype.html" target="_blank" class="function-link">✏️ 体验编辑活动功能</a>
        
        <h3>4.1 功能概述</h3>
        <p>编辑活动功能允许管理员修改已存在的活动信息。编辑功能保持与新增功能相同的界面设计和字段配置，但需要预填充现有活动的数据，并对某些字段进行编辑限制。</p>
        
        <h3>4.2 界面设计</h3>
        <p>编辑活动界面与新增活动界面基本相同，主要区别：</p>
        <ul>
            <li><strong>标题显示</strong>：模态框标题显示为"编辑活动"</li>
            <li><strong>数据预填充</strong>：所有字段预填充当前活动的数据</li>
            <li><strong>字段限制</strong>：通道和渠道字段禁用编辑</li>
            <li><strong>操作按钮</strong>：保持"取消"和"确定"按钮</li>
        </ul>
                
        <h3>4.3 字段编辑限制</h3>
        <div class="field-constraint">
            <p><strong>禁用编辑的字段：</strong></p>
            <ul>
                <li>通道：显示当前值但不可修改</li>
                <li>渠道：显示当前值但不可修改</li>
            </ul>
            <p><strong>可编辑的字段：</strong></p>
            <ul>
                <li>活动名称、主题活动ID、批次号</li>
                <li>生效时间、失效时间</li>
                <li>报名机构、优惠券类型、面值</li>
                <li>使用门槛、使用规则、使用周期</li>
                <li>是否在小程序显示</li>
            </ul>
        </div>
                
        <h3>4.4 操作流程</h3>
        <div class="workflow-step">
            <div class="step-number">1</div>
            <div>用户在活动列表中点击"编辑"按钮</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">2</div>
            <div>系统弹出编辑活动模态框</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">3</div>
            <div>系统预填充当前活动的所有信息</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">4</div>
            <div>系统禁用通道和渠道字段的编辑功能</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">5</div>
            <div>用户修改可编辑的字段</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">6</div>
            <div>用户点击"确定"按钮</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">7</div>
            <div>系统验证修改后的数据</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">8</div>
            <div>验证通过后更新活动信息并关闭模态框</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">9</div>
            <div>刷新活动列表显示更新后的活动</div>
        </div>
                
    </section>
    
    <section>
        <h2>5. 查看活动详情功能</h2>
        <a href="promotion_prototype.html" target="_blank" class="function-link">👁️ 体验查看活动详情功能</a>
        
        <h3>5.1 功能概述</h3>
        <p>查看活动详情功能允许管理员查看已创建活动的完整信息，包括活动详情、发放明细和核销明细三个维度的数据。该功能通过标签页切换的方式组织信息，界面简洁清晰，专注于信息展示和数据分析。</p>
        
        <h3>5.2 界面设计</h3>
        <p>查看活动详情界面采用标签页设计：</p>
        <ul>
            <li><strong>模态框标题</strong>：显示为"活动详情"</li>
            <li><strong>标签页导航</strong>：包含"活动详情"、"发放明细"、"核销明细"三个标签</li>
            <li><strong>标签页切换</strong>：点击标签可切换不同内容区域</li>
            <li><strong>只读模式</strong>：所有信息均为只读，不可编辑</li>
            <li><strong>操作按钮</strong>：只显示"关闭"按钮</li>
        </ul>
                
        <h3>5.3 标签页内容</h3>
        
        <h4>5.3.1 活动详情标签页</h4>
        <p>显示活动的基本配置信息，按区域分组展示：</p>
        <table>
            <thead>
                <tr>
                    <th>信息区域</th>
                    <th>包含字段</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>基本信息</td>
                    <td>活动ID、活动名称、主题活动ID、批次号、通道、渠道、报名机构、活动状态、是否在小程序展示</td>
                </tr>
                <tr>
                    <td>时间信息</td>
                    <td>生效时间、失效时间、创建时间、更新时间</td>
                </tr>
                <tr>
                    <td>优惠券配置</td>
                    <td>优惠券类型、优惠金额、使用门槛、发放总量、每人限领、有效期类型、有效天数、使用说明</td>
                </tr>
                <tr>
                    <td>使用规则</td>
                    <td>详细的使用规则说明文本</td>
                </tr>
            </tbody>
        </table>
        
        <h4>5.3.2 发放明细标签页</h4>
        <p>显示优惠券的发放统计和明细数据：</p>
        <ul>
            <li><strong>统计概览</strong>：总发放数量、已核销数量、未核销数量、核销率</li>
            <li><strong>查询筛选</strong>：支持按OpenID、状态、流水号、发放时间筛选</li>
            <li><strong>明细列表</strong>：券ID、活动ID、OpenID、优惠券类型、优惠金额、使用门槛、发放时间、优惠券状态</li>
            <li><strong>数据导出</strong>：支持下载发放明细数据</li>
            <li><strong>分页显示</strong>：支持分页浏览和每页条数设置</li>
        </ul>
        
        <h4>5.3.3 核销明细标签页</h4>
        <p>显示优惠券的核销统计和明细数据：</p>
        <ul>
            <li><strong>统计概览</strong>：总发放数量、已核销数量、未核销数量、核销率</li>
            <li><strong>查询筛选</strong>：支持按OpenID、状态、流水号、核销时间筛选</li>
            <li><strong>明细列表</strong>：券ID、交易流水号、活动ID、OpenID、优惠券类型、核销金额、订单金额、商户编号、商户名称、核销时间、核销状态</li>
            <li><strong>数据导出</strong>：支持下载核销明细数据</li>
            <li><strong>分页显示</strong>：支持分页浏览和每页条数设置</li>
        </ul>
                
        <h3>5.4 标签页切换功能</h3>
        <p>标签页切换功能的技术实现包含CSS样式和JavaScript交互两个部分：</p>
        
        <h4>5.4.1 CSS样式实现</h4>
        <table>
            <thead>
                <tr>
                    <th>样式类名</th>
                    <th>作用说明</th>
                    <th>关键属性</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>.tabs</td>
                    <td>标签页容器</td>
                    <td>display: flex; border-bottom: 1px solid #e6e6e6</td>
                </tr>
                <tr>
                    <td>.tab-item</td>
                    <td>单个标签样式</td>
                    <td>padding: 12px 24px; cursor: pointer; transition: all 0.3s ease</td>
                </tr>
                <tr>
                    <td>.tab-item.active</td>
                    <td>激活状态标签</td>
                    <td>color: #409eff; border-bottom: 2px solid #409eff</td>
                </tr>
                <tr>
                    <td>.tab-item:hover</td>
                    <td>鼠标悬停效果</td>
                    <td>color: #409eff</td>
                </tr>
                <tr>
                    <td>.tab-content</td>
                    <td>标签内容区域</td>
                    <td>display: none（默认隐藏）</td>
                </tr>
                <tr>
                    <td>.tab-content.active</td>
                    <td>激活状态内容</td>
                    <td>display: block（显示当前内容）</td>
                </tr>
            </tbody>
        </table>
        
        <h4>5.4.2 JavaScript交互实现</h4>
        <p>标签页切换的核心JavaScript函数 <code>setupTabSwitching()</code> 实现逻辑：</p>
        <ul>
            <li><strong>事件绑定</strong>：为所有 <code>.tab-item</code> 元素绑定点击事件监听器</li>
            <li><strong>状态清除</strong>：点击时移除所有标签和内容的 <code>active</code> 类</li>
            <li><strong>状态激活</strong>：为当前点击的标签添加 <code>active</code> 类</li>
            <li><strong>内容切换</strong>：根据标签的 <code>data-tab</code> 属性找到对应内容区域并激活</li>
            <li><strong>默认状态</strong>：页面加载时自动激活"活动详情"标签</li>
        </ul>
        
        <h4>5.4.3 HTML结构要求</h4>
        <p>标签页功能需要遵循特定的HTML结构：</p>
        <ul>
            <li><strong>标签容器</strong>：使用 <code>&lt;div class="tabs"&gt;</code> 包裹所有标签</li>
            <li><strong>标签元素</strong>：每个标签使用 <code>&lt;div class="tab-item" data-tab="标签ID"&gt;</code></li>
            <li><strong>内容区域</strong>：对应内容使用 <code>&lt;div class="tab-content" id="标签ID-content"&gt;</code></li>
            <li><strong>数据属性</strong>：<code>data-tab</code> 值必须与内容区域ID前缀保持一致</li>
        </ul>
        
        <h4>5.4.4 交互效果特性</h4>
        <ul>
            <li><strong>平滑过渡</strong>：标签切换时有0.3秒的CSS过渡动画</li>
            <li><strong>视觉反馈</strong>：激活标签显示蓝色文字和底部边框</li>
            <li><strong>鼠标交互</strong>：悬停时标签文字变为蓝色，提供即时反馈</li>
            <li><strong>状态保持</strong>：切换标签后保持当前激活状态，直到点击其他标签</li>
        </ul>
        
        <h3>5.5 操作流程</h3>
        <div class="workflow-step">
            <div class="step-number">1</div>
            <div>用户在活动列表中点击"查看"按钮</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">2</div>
            <div>系统弹出查看活动详情模态框</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">3</div>
            <div>系统默认显示"活动详情"标签页内容</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">4</div>
            <div>用户可点击"发放明细"或"核销明细"标签切换查看不同内容</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">5</div>
            <div>在发放明细和核销明细标签页中，用户可进行数据筛选和导出操作</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">6</div>
            <div>用户点击"关闭"按钮关闭模态框</div>
        </div>
                
    </section>
    
    <section>
        <h2>6. 活动状态管理</h2>
        <a href="promotion_prototype.html" target="_blank" class="function-link">🔄 体验状态管理功能</a>
        
        <h3>6.1 状态流转图</h3>
        <div id="activity-status-chart" class="chart-container">
            <svg width="100%" height="400" viewBox="0 0 800 400" xmlns="http://www.w3.org/2000/svg">
                <!-- 状态节点 -->
                <circle cx="100" cy="200" r="40" fill="#e8f5e8" stroke="#4CAF50" stroke-width="2"/>
                <text x="100" y="205" text-anchor="middle" font-size="12" fill="#333">待开始</text>
                
                <circle cx="300" cy="200" r="40" fill="#e3f2fd" stroke="#2196F3" stroke-width="2"/>
                <text x="300" y="205" text-anchor="middle" font-size="12" fill="#333">进行中</text>
                
                <circle cx="500" cy="120" r="40" fill="#fff3e0" stroke="#FF9800" stroke-width="2"/>
                <text x="500" y="125" text-anchor="middle" font-size="12" fill="#333">已终止</text>
                
                <circle cx="500" cy="280" r="40" fill="#fce4ec" stroke="#E91E63" stroke-width="2"/>
                <text x="500" y="285" text-anchor="middle" font-size="12" fill="#333">已结束</text>
                
                <!-- 箭头 -->
                <defs>
                    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
                    </marker>
                </defs>
                
                <!-- 待开始 -> 进行中 -->
                <line x1="140" y1="200" x2="260" y2="200" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                <text x="200" y="190" text-anchor="middle" font-size="10" fill="#666">到达生效时间</text>
                
                <!-- 进行中 -> 已终止 -->
                <line x1="330" y1="180" x2="470" y2="140" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                <text x="400" y="150" text-anchor="middle" font-size="10" fill="#666">手动终止</text>
                
                <!-- 进行中 -> 已结束 -->
                <line x1="330" y1="220" x2="470" y2="260" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                <text x="400" y="250" text-anchor="middle" font-size="10" fill="#666">到达失效时间</text>
            </svg>
        </div>

        <h3>6.2 状态说明</h3>
        <table>
            <thead>
                <tr>
                    <th>状态</th>
                    <th>说明</th>
                    <th>可执行操作</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>待开始</td>
                    <td>活动已创建但尚未到生效时间</td>
                    <td>编辑、删除、查看</td>
                </tr>
                <tr>
                    <td>进行中</td>
                    <td>活动正在进行，可以发放和核销优惠券</td>
                    <td>编辑、终止、查看</td>
                </tr>
                <tr>
                    <td>已终止</td>
                    <td>活动被手动终止，不再发放新的优惠券</td>
                    <td>查看</td>
                </tr>
                <tr>
                    <td>已结束</td>
                    <td>活动已到失效时间，自动结束</td>
                    <td>查看</td>
                </tr>
            </tbody>
        </table>
        
        <h3>6.3 操作权限控制</h3>
        <table>
            <thead>
                <tr>
                    <th>角色</th>
                    <th>查看</th>
                    <th>创建</th>
                    <th>编辑</th>
                    <th>终止</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>管理员</td>
                    <td>✓</td>
                    <td>✓</td>
                    <td>✓</td>
                    <td>✓</td>
                </tr>
                <tr>
                    <td>操作员</td>
                    <td>✓</td>
                    <td>✓</td>
                    <td>✓</td>
                    <td>✗</td>
                </tr>
                <tr>
                    <td>审计员</td>
                    <td>✓</td>
                    <td>✗</td>
                    <td>✗</td>
                    <td>✗</td>
                </tr>
            </tbody>
        </table>
    </section>
    
    <section>
        <h2>7. 批量操作功能</h2>
        <a href="promotion_prototype.html" target="_blank" class="function-link">📋 体验批量操作功能</a>
        
        <h3>7.1 功能概述</h3>
        <p>系统支持对多个活动进行批量操作，提高管理效率。批量操作包括批量暂停、批量导出等功能。</p>
        
        <h3>7.2 支持的批量操作</h3>
        <table>
            <thead>
                <tr>
                    <th>操作类型</th>
                    <th>适用状态</th>
                    <th>操作说明</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>批量暂停</td>
                    <td>进行中</td>
                    <td>将选中的进行中活动批量设置为已终止状态</td>
                </tr>
                <tr>
                    <td>批量导出</td>
                    <td>全部</td>
                    <td>导出选中活动的详细信息到Excel文件</td>
                </tr>
            </tbody>
        </table>
    </section>
    
    <section>
        <h2>8. 技术规范</h2>
        
        <h3>8.1 数据字典</h3>
        <table>
            <thead>
                <tr>
                    <th>字段名</th>
                    <th>数据类型</th>
                    <th>长度</th>
                    <th>描述</th>
                    <th>约束</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>activity_id</td>
                    <td>VARCHAR</td>
                    <td>32</td>
                    <td>活动唯一标识</td>
                    <td>主键，UUID格式</td>
                </tr>
                <tr>
                    <td>activity_name</td>
                    <td>VARCHAR</td>
                    <td>100</td>
                    <td>活动名称</td>
                    <td>非空，唯一</td>
                </tr>
                <tr>
                    <td>theme_activity_id</td>
                    <td>VARCHAR</td>
                    <td>50</td>
                    <td>主题活动ID</td>
                    <td>非空，外键</td>
                </tr>
                <tr>
                    <td>batch_number</td>
                    <td>VARCHAR</td>
                    <td>9</td>
                    <td>批次号</td>
                    <td>非空，9位数字</td>
                </tr>
                <tr>
                    <td>effective_time</td>
                    <td>DATETIME</td>
                    <td>-</td>
                    <td>生效时间</td>
                    <td>非空，未来时间</td>
                </tr>
                <tr>
                    <td>expire_time</td>
                    <td>DATETIME</td>
                    <td>-</td>
                    <td>失效时间</td>
                    <td>非空，晚于生效时间</td>
                </tr>
                <tr>
                    <td>channel</td>
                    <td>VARCHAR</td>
                    <td>20</td>
                    <td>通道</td>
                    <td>枚举值：微信支付/支付宝/云闪付</td>
                </tr>
                <tr>
                    <td>channel_code</td>
                    <td>VARCHAR</td>
                    <td>50</td>
                    <td>渠道代码</td>
                    <td>非空</td>
                </tr>
                <tr>
                    <td>organization</td>
                    <td>VARCHAR</td>
                    <td>200</td>
                    <td>报名机构</td>
                    <td>非空</td>
                </tr>
                <tr>
                    <td>coupon_type</td>
                    <td>VARCHAR</td>
                    <td>20</td>
                    <td>优惠券类型</td>
                    <td>枚举值：满减券/折扣券/代金券</td>
                </tr>
                <tr>
                    <td>face_value</td>
                    <td>DECIMAL</td>
                    <td>10,2</td>
                    <td>面值</td>
                    <td>非空，大于0</td>
                </tr>
                <tr>
                    <td>threshold</td>
                    <td>DECIMAL</td>
                    <td>10,2</td>
                    <td>使用门槛</td>
                    <td>大于等于0</td>
                </tr>
                <tr>
                    <td>usage_rules</td>
                    <td>TEXT</td>
                    <td>-</td>
                    <td>使用规则</td>
                    <td>非空</td>
                </tr>
                <tr>
                    <td>usage_period</td>
                    <td>VARCHAR</td>
                    <td>50</td>
                    <td>使用周期</td>
                    <td>枚举值：固定天数/指定日期范围</td>
                </tr>
                <tr>
                    <td>show_in_miniprogram</td>
                    <td>TINYINT</td>
                    <td>1</td>
                    <td>是否在小程序显示</td>
                    <td>0或1</td>
                </tr>
                <tr>
                    <td>status</td>
                    <td>VARCHAR</td>
                    <td>20</td>
                    <td>活动状态</td>
                    <td>枚举值：待开始/进行中/已终止/已结束</td>
                </tr>
                <tr>
                    <td>create_time</td>
                    <td>DATETIME</td>
                    <td>-</td>
                    <td>创建时间</td>
                    <td>自动生成</td>
                </tr>
                <tr>
                    <td>update_time</td>
                    <td>DATETIME</td>
                    <td>-</td>
                    <td>更新时间</td>
                    <td>自动更新</td>
                </tr>
            </tbody>
        </table>
        
        <h3>8.2 API接口规范</h3>
        <h4>8.2.1 查询活动列表</h4>
        <div class="api-endpoint">GET /api/activities</div>
        <div class="parameter-list">
            <p><strong>请求参数：</strong></p>
            <ul>
                <li>activityName: 活动名称（可选）</li>
                <li>themeActivityId: 主题活动ID（可选）</li>
                <li>batchNumber: 批次号（可选）</li>
                <li>channel: 通道（可选）</li>
                <li>channelCode: 渠道（可选）</li>
                <li>organization: 报名机构（可选）</li>
                <li>status: 状态（可选）</li>
                <li>startTime: 开始时间（可选）</li>
                <li>endTime: 结束时间（可选）</li>
                <li>page: 页码（默认1）</li>
                <li>size: 每页大小（默认20）</li>
            </ul>
        </div>
        
        <h4>8.2.2 创建活动</h4>
        <div class="api-endpoint">POST /api/activities</div>
        <div class="parameter-list">
            <p><strong>请求体：</strong>包含活动的所有必填字段</p>
        </div>
        
        <h4>8.2.3 更新活动</h4>
        <div class="api-endpoint">PUT /api/activities/{id}</div>
        <div class="parameter-list">
            <p><strong>请求体：</strong>包含需要更新的字段</p>
        </div>
        
        <h4>8.2.4 终止活动</h4>
        <div class="api-endpoint">POST /api/activities/{id}/terminate</div>
        
        <h3>8.3 性能要求</h3>
        <table>
            <thead>
                <tr>
                    <th>指标</th>
                    <th>要求</th>
                    <th>说明</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>响应时间</td>
                    <td>≤500ms</td>
                    <td>95%的请求响应时间</td>
                </tr>
                <tr>
                    <td>并发处理</td>
                    <td>≥1000 TPS</td>
                    <td>系统峰值处理能力</td>
                </tr>
                <tr>
                    <td>数据库连接</td>
                    <td>连接池大小50</td>
                    <td>支持高并发访问</td>
                </tr>
                <tr>
                    <td>缓存命中率</td>
                    <td>≥90%</td>
                    <td>热点数据缓存</td>
                </tr>
            </tbody>
        </table>
        
        <h3>8.4 安全要求</h3>
        <ul>
            <li><strong>数据加密</strong>：敏感数据采用AES-256加密存储</li>
            <li><strong>访问控制</strong>：基于角色的权限控制（RBAC）</li>
            <li><strong>操作审计</strong>：记录所有操作日志，保留36个月</li>
            <li><strong>输入验证</strong>：所有用户输入进行严格验证和过滤</li>
            <li><strong>SQL注入防护</strong>：使用参数化查询防止SQL注入</li>
            <li><strong>XSS防护</strong>：对输出内容进行HTML转义</li>
        </ul>
    </section>
    
    <footer>
        <p>© 2024 银行联合营销平台 - 微信活动管理系统需求说明文档</p>
        <p>文档版本：v1.0 | 最后更新：2024年</p>
    </footer>
</body>
</html>