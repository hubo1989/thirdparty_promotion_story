<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>联合营销平台 - 活动优惠券管理需求说明文档</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        
        header {
            text-align: center; 
            margin-bottom: 30pt; 
            border-bottom: 3pt solid #007bff; 
            padding-bottom: 20pt;
        }
        
        h1, h2, h3, h4 {
            margin-top: 0;
        }
        
        h1 {
            font-size: 20pt; 
            color: #2c3e50; 
            border-bottom: 2px solid #007bff; 
            padding-bottom: 10pt; 
            margin-top: 20pt;
            margin-bottom: 15pt;
            page-break-after: avoid;
        }
        
        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        section {
            background: white;
            margin-bottom: 2rem;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        h2 {
            color: #007bff;
            border-bottom: 2px solid #007bff;
            padding-bottom: 0.5rem;
        }
        
        h3 {
            color: #495057;
        }
        
        h4 {
            color: #333;
            margin-top: 1.5rem;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        
        th, td {
            border: 1px solid #dee2e6;
            padding: 0.75rem;
            text-align: left;
        }
        
        th {
            background-color: #e9ecef;
            font-weight: bold;
        }
        
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .prototype-btn {
            display: inline-block;
            padding: 1rem 2rem;
            background-color: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            margin: 1rem 0;
            font-size: 16px;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);
            transition: all 0.3s ease;
        }
        
        /* 状态标签样式 */
        .status-badge {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
            display: inline-block;
        }
        
        .status-success {
            background-color: #f0f9ff;
            color: #67c23a;
            border: 1px solid #b3e19d;
        }
        
        .status-danger {
            background-color: #fef0f0;
            color: #f56c6c;
            border: 1px solid #f5c6cb;
        }
        
        .status-warning {
            background-color: #fdf6ec;
            color: #e6a23c;
            border: 1px solid #f0d0a0;
        }
        
        .status-info {
            background-color: #f4f4f5;
            color: #909399;
            border: 1px solid #d3d4d6;
        }
        
        /* 标签页样式 */
        .tabs {
            display: flex;
            border-bottom: 1px solid #e6e6e6;
            margin: 20px 0;
        }
        
        .tab-item {
            padding: 12px 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 2px solid transparent;
            color: #606266;
        }
        
        .tab-item:hover {
            color: #409eff;
        }
        
        .tab-item.active {
            color: #409eff;
            border-bottom: 2px solid #409eff;
        }
        
        .tab-content {
            display: none;
            padding: 20px 0;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* 示例区域样式 */
        .example-section {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .example-title {
            font-weight: bold;
            margin-bottom: 15px;
            color: #495057;
        }
        
        .prototype-btn:hover {
            background-color: #0056b3;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 123, 255, 0.4);
            text-decoration: none;
            color: white;
        }
        
        .function-link {
            display: inline-block;
            padding: 8px 16px;
            background-color: #e3f2fd;
            color: #1976d2;
            text-decoration: none;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            margin: 8px 4px;
            border: 2px solid #bbdefb;
            box-shadow: 0 2px 8px rgba(25, 118, 210, 0.2);
            transition: all 0.3s ease;
        }

        .function-link:hover {
            background-color: #1976d2;
            color: white;
            text-decoration: none;
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(25, 118, 210, 0.3);
        }

        .field-constraint {
            background-color: #fff3e0;
            padding: 8px;
            border-left: 4px solid #ff9800;
            margin: 8px 0;
            font-size: 14px;
        }

        .workflow-step {
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 10px;
            background-color: #f5f5f5;
            border-radius: 4px;
        }

        .workflow-step .step-number {
            background-color: #007bff;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            margin-right: 10px;
            flex-shrink: 0;
        }

        .dev-note {
            background-color: #fff8e1;
            border: 1px solid #ffc107;
            padding: 12px;
            border-radius: 4px;
            margin: 10px 0;
        }

        .dev-note-title {
            font-weight: bold;
            color: #f57f17;
            margin-bottom: 8px;
        }
        
        .prototype-preview {
            text-align: center;
            margin: 2rem 0;
            padding: 1rem;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .prototype-preview img {
            max-width: 100%;
            height: auto;
            border: 1px solid #dee2e6;
            border-radius: 4px;
        }
        
        .prototype-preview figcaption {
            margin-top: 1rem;
            color: #666;
            font-style: italic;
        }
        
        footer {
            text-align: center;
            margin-top: 2rem;
            padding: 1rem;
            color: #666;
            font-size: 0.9em;
        }
        .warning-box { 
            background-color: #fff3cd; 
            border: 1pt solid #ffeaa7; 
            padding: 10pt; 
            margin: 10pt 0; 
        }
        .success-box { 
            background-color: #d4edda; 
            border: 1pt solid #c3e6cb; 
            padding: 10pt; 
            margin: 10pt 0; 
        }
        .header { 
            text-align: center; 
            margin-bottom: 30pt; 
            border-bottom: 3pt solid #007bff; 
            padding-bottom: 20pt;
        }
        .meta { 
            color: #666; 
            font-size: 12pt; 
            margin-top: 10pt;
        }
        .footer { 
            text-align: center; 
            margin-top: 30pt; 
            border-top: 2pt solid #ccc; 
            padding-top: 20pt; 
            color: #666; 
            font-size: 12pt;
        }
        .api-endpoint { 
            background-color: #28a745; 
            color: white; 
            padding: 4pt 8pt; 
            font-family: 'Courier New', monospace; 
            font-size: 12pt;
        }
        .parameter-list { 
            background-color: #f8f9fa; 
            padding: 8pt; 
            margin: 8pt 0; 
            border-left: 3pt solid #007bff;
        }
        .url-link {
            color: #0066cc;
            text-decoration: underline;
            font-family: 'Courier New', monospace;
            font-size: 12pt;
        }
        /* 图表容器样式 */
        .chart-container {
            position: relative;
            width: 100%;
            min-height: 500px;
            height: auto;
            border: 1px solid #ddd;
            margin: 10pt 0;
        }
        .chart-placeholder {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            background-color: #f8f9fa;
            color: #666;
            font-style: italic;
        }
        @page {
            margin: 1in 10% 1in 10%;
        }
        @media print {
            body { margin: 1in 10% 1in 10%; }
        }
    </style>
</head>
<body>
    <header>
        <h1>联合营销平台 - 活动优惠券管理需求说明文档</h1>
        <p class="subtitle">基于原型界面的详细功能需求</p>
    </header>
    
    <!-- 原型图片预览 -->
    <figure class="prototype-preview">
        <img src="image/promotion_preview.png" alt="活动优惠券管理系统原型预览">
        <figcaption>活动优惠券管理系统原型界面预览</figcaption>
    </figure>

    <section>
        <h2>1. 系统概述</h2>
        <p>银行联合营销平台活动优惠券管理系统是一个基于Web的企业级营销活动管理平台，主要用于管理多渠道优惠券营销活动（微信、支付宝、银联）的全生命周期。系统提供活动创建、查询、编辑、状态管理等核心功能，支持批量操作和多维度数据筛选。</p>
        
        <h3>1.1 核心功能模块</h3>
        <p>系统包含以下主要功能模块：</p>
        <ul>
            <li><strong>活动管理</strong>：新增、编辑、查看、暂停/启用活动优惠券</li>
            <li><strong>查询筛选</strong>：支持多维度条件查询和智能筛选</li>
            <li><strong>批量操作</strong>：支持批量暂停、导出等操作</li>
            <li><strong>数据查看</strong>：查看活动详情、使用规则等信息</li>
        </ul>
    </section>
    
    <section>
        <h2>2. 通道管理功能</h2>
        <a href="promotion_prototype.html" target="_blank" class="function-link">🔄 体验通道切换功能</a>
        
        <h3>2.1 功能概述</h3>
        <p>通道管理功能支持多个第三方支付通道的统一管理，用户可以通过标签页切换查看不同通道的活动数据。系统当前支持云数汇通道，并预留了其他通道的扩展接口。</p>
        
        <h3>2.2 通道标签栏设计</h3>
        <p>通道标签栏采用水平标签页布局，支持动态加载和切换：</p>
        <ul>
            <li><strong>云数汇通道</strong>：主要支付通道，处理微信、支付宝、云闪付等渠道的优惠券活动</li>
            <li><strong>内部通道</strong>：预留通道，支持拉卡拉支付体系的优惠券管理</li>
            <li><strong>其他通道</strong>：可扩展的第三方支付通道接口</li>
        </ul>
        
        <h4>2.2.1 通道标签栏交互功能</h4>
        <p>通道标签栏提供直观的通道切换体验，每个标签下仅展示当前通道的数据：</p>
        <ul>
            <li><strong>标签切换</strong>：点击不同通道标签，页面内容动态切换到对应通道的数据</li>
            <li><strong>数据隔离</strong>：每个通道标签下的活动列表、统计数据完全独立</li>
            <li><strong>加载提示</strong>：通道切换时显示加载动画，提升用户体验</li>
        </ul>
        
        <h4>2.2.2 云数汇通道功能详述</h4>
        <p>云数汇通道作为主要支付通道，提供完整的优惠券活动管理功能：</p>
        <ul>
            <li><strong>渠道支持</strong>：支持微信、支付宝支付渠道</li>
            <li><strong>活动管理</strong>：支持满减券的创建和管理</li>
            <li><strong>实时监控</strong>：提供活动状态实时监控，包括发券量、核销量、剩余量等关键指标</li>
            <li><strong>数据统计</strong>：支持按时间、渠道、券类型等维度的数据统计和分析</li>
            <li><strong>批量操作</strong>：支持批量导入、导出、暂停、终止等批量操作功能</li>
        </ul>
        
        <h4>2.2.3 后续通道扩展规划</h4>
        <p>系统预留了多个通道的扩展接口，支持未来业务发展需要：</p>
        <ul>
            <li><strong>内部通道</strong>：计划接入拉卡拉支付体系，支持线下商户的优惠券业务</li>
            <li><strong>直连通道</strong>：接入微信、支付宝等官方发券渠道</li>
        </ul>
        
        <h3>2.3 通道功能特性</h3>
        <table>
            <thead>
                <tr>
                    <th>通道名称</th>
                    <th>支持渠道</th>
                    <th>功能状态</th>
                    <th>接口规范</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>云数汇</td>
                    <td>微信、支付宝</td>
                    <td>开发中</td>
                    <td>REST API</td>
                </tr>
            </tbody>
        </table>
        
        <h3>2.4 数据隔离机制</h3>
        <p>每个通道的数据完全隔离，确保数据安全和业务独立：</p>
        <ul>
            <li><strong>数据库隔离</strong>：不同通道使用独立的数据表或数据库实例</li>
            <li><strong>接口隔离</strong>：每个通道有独立的API接口和认证机制</li>
            <li><strong>权限隔离</strong>：用户权限按通道进行分配和控制</li>
            <li><strong>配置隔离</strong>：每个通道有独立的配置参数和业务规则</li>
        </ul>
        
        <h3>2.5 标签切换交互</h3>
        <div class="example-section">
            <div class="example-title">通道标签页示例：</div>
            <div class="tabs">
                <div class="tab-item active" data-tab="yunshuhui" onclick="switchChannel('yunshuhui')">云数汇</div>
                <div class="tab-item" data-tab="lakala" onclick="switchChannel('lakala')">拉卡拉</div>
                <div class="tab-item" data-tab="unionpay" onclick="switchChannel('unionpay')">直连</div>
                <div class="tab-item" data-tab="others" onclick="switchChannel('others')">其他</div>
            </div>
            
            <div class="tab-content active" id="yunshuhui">
                <p><strong>云数汇通道</strong></p>
                <p>显示云数汇通道下的所有活动数据，包括微信、支付宝、云闪付等渠道的优惠券活动。</p>
            </div>
            
            <div class="tab-content" id="lakala">
                <p><strong>拉卡拉通道</strong></p>
                <p>显示拉卡拉通道下的活动数据，支持拉卡拉支付体系的优惠券管理。</p>
            </div>
            
            <div class="tab-content" id="unionpay">
                <p><strong>直连通道/strong></p>
                <p>显示银联通道下的活动数据，支持银联支付网络的优惠券业务。</p>
            </div>
            
            <div class="tab-content" id="others">
                <p><strong>其他通道</strong></p>
                <p>显示其他第三方支付通道的活动数据，支持可扩展的通道接入。</p>
            </div>
        </div>
        
        <h3>2.6 操作流程</h3>
        <div class="workflow-step">
            <div class="step-number">1</div>
            <div>用户进入活动管理页面，默认显示云数汇通道</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">2</div>
            <div>用户点击其他通道标签（如拉卡拉、银联等）</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">3</div>
            <div>系统切换到对应通道，加载该通道的活动数据</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">4</div>
            <div>页面显示当前通道下的所有功能模块（查询、新增、编辑等）</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">5</div>
            <div>用户在当前通道下进行活动管理操作</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">6</div>
            <div>所有操作仅影响当前选中的通道数据</div>
        </div>
    </section>
    
    <section>
        <h2>3. 查询筛选功能</h2>
        
        <h3>3.1 功能描述</h3>
        <p>系统提供多维度的活动查询筛选功能，支持精确查找和模糊搜索，帮助用户快速定位目标活动。在选定的通道下，筛选功能仅显示当前通道的活动数据。</p>

        <h3>3.2 筛选字段</h3>
        <table>
            <thead>
                <tr>
                    <th>字段名称</th>
                    <th>字段类型</th>
                    <th>查询方式</th>
                    <th>是否必填</th>
                    <th>字段限制</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>活动名称</td>
                    <td>文本输入</td>
                    <td>模糊匹配</td>
                    <td>否</td>
                    <td>最大长度50字符</td>
                </tr>
                <tr>
                    <td>主题活动ID</td>
                    <td>文本输入</td>
                    <td>精确匹配</td>
                    <td>否</td>
                    <td>最大长度20字符，支持数字和字母</td>
                </tr>
                <tr>
                    <td>批次号</td>
                    <td>文本输入</td>
                    <td>精确匹配</td>
                    <td>否</td>
                    <td>最大长度50字符</td>
                </tr>
                <tr>
                    <td>渠道类别</td>
                    <td>下拉选择</td>
                    <td>精确匹配</td>
                    <td>否</td>
                    <td>微信/支付宝/云闪付</td>
                </tr>
                <tr>
                    <td>券类别</td>
                    <td>下拉选择</td>
                    <td>精确匹配</td>
                    <td>否</td>
                    <td>暂时仅支持满减券</td>
                </tr>
                <tr>
                    <td>活动状态</td>
                    <td>下拉选择</td>
                    <td>精确匹配</td>
                    <td>否</td>
                    <td>生效/失效</td>
                </tr>
                <tr>
                    <td>活动时间</td>
                    <td>日期范围选择</td>
                    <td>范围查询</td>
                    <td>否</td>
                    <td>开始时间-结束时间</td>
                </tr>
                <tr>
                    <td>活动时间</td>
                    <td>日期范围</td>
                    <td>范围查询</td>
                    <td>否</td>
                    <td>开始时间不能晚于结束时间</td>
                </tr>
            </tbody>
        </table>
        
        <div class="field-constraint">
            <strong>字段约束说明：</strong>
            <ul>
                <li>批次号：支付渠道的活动批次号</li>
                <li>机构下拉框支持输入搜索，实时过滤匹配项</li>
                <li>日期选择器默认格式为YYYY-MM-DD</li>
                <li>所有文本输入框支持中英文和数字</li>
            </ul>
        </div>

        <h3>3.3 业务流程</h3>
        <div class="workflow-step">
            <div class="step-number">1</div>
            <div>用户在筛选区域输入查询条件</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">2</div>
            <div>系统进行前端字段验证（格式、长度等）</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">3</div>
            <div>点击查询按钮，系统发送查询请求</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">4</div>
            <div>后端处理查询条件，返回匹配的活动列表</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">5</div>
            <div>前端更新表格显示查询结果</div>
        </div>
    </section>
    
    <section>
        <h2>4. 新增活动功能</h2>
                
        <h3>4.1 功能概述</h3>
        <p>系统提供新增优惠券活动的功能，允许管理员创建新的多渠道优惠券营销活动（微信、支付宝、银联）。新增活动包括填写活动基本信息、配置优惠券规则、设置使用限制等。</p>
                
        <h3>6.2 界面设计</h3>
        <p>新增活动功能通过弹出模态框实现，包含以下元素：</p>
        <ul>
            <li><strong>模态框</strong>：覆盖整个屏幕，包含表单内容和操作按钮</li>
            <li><strong>关闭按钮</strong>：右上角"×"按钮，用于关闭模态框</li>
            <li><strong>表单区域</strong>：包含活动信息输入字段</li>
            <li><strong>操作按钮</strong>：包括"取消"和"确定"按钮</li>
        </ul>
        
        <h3>4.3 表单字段</h3>
        <p>新增活动表单包含以下字段：</p>
        <table>
            <thead>
                <tr>
                    <th>字段名称</th>
                    <th>字段类型</th>
                    <th>必填</th>
                    <th>约束条件</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>活动优惠券ID</td>
                    <td>自动生成</td>
                    <td>否</td>
                    <td>活动优惠券的数据主要查询依据，以渠道缩写+主题活动ID+时间戳组成</td>
                </tr>
                <tr>
                    <td>活动名称</td>
                    <td>文本输入框</td>
                    <td>是</td>
                    <td>最大50字符，用于业务识别，不能重复</td>
                </tr>
                <tr>
                    <td>主题活动ID</td>
                    <td>输入下拉框，检索后选择关联主题活动</td>
                    <td>否</td>
                    <td>最大20字符，关联主题活动表的活动ID</td>
                </tr>
                <tr>
                    <td>批次号</td>
                    <td>文本输入框</td>
                    <td>否</td>
                    <td>输入支付渠道的实际活动批次号</td>
                </tr>
                <tr>
                    <td>开始时间</td>
                    <td>日期时间选择器</td>
                    <td>否</td>
                    <td>不能选择过去时间，格式YYYY-MM-DD HH:mm:ss</td>
                </tr>
                <tr>
                    <td>结束时间</td>
                    <td>日期时间选择器</td>
                    <td>否</td>
                    <td>必须晚于开始时间，格式YYYY-MM-DD HH:mm:ss</td>
                </tr>
                <tr>
                    <td>渠道类别</td>
                    <td>下拉选择框</td>
                    <td>否</td>
                    <td>可选：微信、支付宝、云闪付</td>
                </tr>
                <tr>
                    <td>券类别</td>
                    <td>单选按钮组</td>
                    <td>否</td>
                    <td>可选：满减券、折扣券、代金券</td>
                </tr>
                <tr>
                    <td>券面额</td>
                    <td>数值输入框</td>
                    <td>否</td>
                    <td>最多支持小数点后2位，单位：元</td>
                </tr>
                <tr>
                    <td>最小使用门槛</td>
                    <td>数值输入框</td>
                    <td>否</td>
                    <td>最多支持小数点后2位，0表示无门槛</td>
                </tr>
                <tr>
                    <td>小程序展示</td>
                    <td>开关按钮</td>
                    <td>否</td>
                    <td>是否在小程序上展示该活动</td>
                </tr>
                <tr>
                    <td>是否结算</td>
                    <td>开关按钮</td>
                    <td>否</td>
                    <td>是否参与结算</td>
                </tr>
                <tr>
                    <td>使用说明</td>
                    <td>文本域</td>
                    <td>否</td>
                    <td>最大255字符，券的使用说明</td>
                </tr>
                <tr>
                    <td>有效期类型</td>
                    <td>单选按钮组</td>
                    <td>否</td>
                    <td>可选：绝对时间、相对时间</td>
                </tr>
                <tr>
                    <td>生效天数</td>
                    <td>数值输入框</td>
                    <td>否</td>
                    <td>领取后多少天生效，仅相对时间有效</td>
                </tr>
                <tr>
                    <td>使用规则</td>
                    <td>文本域</td>
                    <td>是</td>
                    <td>详细描述优惠券的使用规则和限制条件</td>
                </tr>
                <tr>
                    <td>使用周期</td>
                    <td>单选按钮组</td>
                    <td>是</td>
                    <td>可选：固定天数、指定日期范围</td>
                </tr>
                <tr>
                    <td>是否在小程序显示</td>
                    <td>单选按钮组</td>
                    <td>是</td>
                    <td>可选：是、否</td>
                </tr>
            </tbody>
        </table>
                
        <h3>3.4 表单验证规则</h3>
        <p>系统对用户输入进行实时验证：</p>
        <ul>
            <li><strong>必填字段验证</strong>：所有必填字段为空时显示错误提示</li>
            <li><strong>格式验证</strong>：日期时间格式、数值格式、字符长度等</li>
            <li><strong>唯一性验证</strong>：活动名称不能重复</li>
            <li><strong>字段约束验证</strong>：主题活动ID、通道和渠道在编辑模式下禁用修改</li>
            <li><strong>数值精度验证</strong>：面值和使用门槛支持小数点后2位</li>
        </ul>
        
        <h3>5.4 操作流程</h3>
        <div class="workflow-step">
            <div class="step-number">1</div>
            <div>用户点击"新增活动"按钮</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">2</div>
            <div>系统弹出新增活动模态框</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">3</div>
            <div>用户填写活动信息（所有字段可编辑）</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">4</div>
            <div>系统实时验证用户输入</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">5</div>
            <div>用户点击"确定"按钮</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">6</div>
            <div>系统验证所有字段</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">7</div>
            <div>验证通过后保存活动信息并关闭模态框</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">8</div>
            <div>刷新活动列表显示新增的活动</div>
        </div>
                
    </section>
    
    <section>
        <h2>5. 编辑活动功能</h2>
        <a href="promotion_prototype.html" target="_blank" class="function-link">✏️ 体验编辑活动功能</a>
        
        <h3>5.1 功能概述</h3>
        <p>编辑活动功能允许管理员修改已存在的活动信息。编辑功能保持与新增功能相同的界面设计和字段配置，但需要预填充现有活动的数据，并对某些字段进行编辑限制。</p>
        
        <h3>4.2 界面设计</h3>
        <p>编辑活动界面与新增活动界面基本相同，主要区别：</p>
        <ul>
            <li><strong>标题显示</strong>：模态框标题显示为"编辑活动"</li>
            <li><strong>数据预填充</strong>：所有字段预填充当前活动的数据</li>
            <li><strong>字段限制</strong>：通道和渠道字段禁用编辑</li>
            <li><strong>操作按钮</strong>：保持"取消"和"确定"按钮</li>
        </ul>
                
        <h3>5.3 字段编辑限制</h3>
        <div class="field-constraint">
            <p><strong>禁用编辑的字段：</strong></p>
            <ul>
                <li>主题活动ID：显示当前值但不可修改</li>
                <li>活动优惠券ID：显示当前值但不可修改</li>
                <li>渠道类别：显示当前值但不可修改</li>
                <li>券类别：显示当前值但不可修改</li>
                <li>批次号：显示当前值但不可修改</li> 
            </ul>
            <p><strong>可编辑的字段：</strong></p>
            <ul>
                <li>活动名称</li>
                <li>开始时间、结束时间</li>
                <li>券面额、最小使用门槛</li>
                <li>小程序展示、是否结算</li>
                <li>使用说明、有效类型、生效天数</li>
                <li>活动状态</li>
            </ul>
        </div>
                
        <h3>4.4 操作流程</h3>
        <div class="workflow-step">
            <div class="step-number">1</div>
            <div>用户在活动列表中点击"编辑"按钮</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">2</div>
            <div>系统弹出编辑活动模态框</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">3</div>
            <div>系统预填充当前活动的所有信息</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">4</div>
            <div>系统禁用通道和渠道字段的编辑功能</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">5</div>
            <div>用户修改可编辑的字段</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">6</div>
            <div>用户点击"确定"按钮</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">7</div>
            <div>系统验证修改后的数据</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">8</div>
            <div>验证通过后更新活动信息并关闭模态框</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">9</div>
            <div>刷新活动列表显示更新后的活动</div>
        </div>
                
    </section>
    
    <section>
        <h2>6. 查看活动详情功能</h2>
        
        <h3>6.1 功能概述</h3>
        <p>查看活动详情功能允许管理员查看已创建活动的完整信息，包括活动详情、发放明细和核销明细三个维度的数据。该功能通过标签页切换的方式组织信息，界面简洁清晰，专注于信息展示和数据分析。</p>
        
        <h3>5.2 界面设计</h3>
        <p>查看活动详情界面采用标签页设计：</p>
        <ul>
            <li><strong>模态框标题</strong>：显示为"活动详情"</li>
            <li><strong>标签页导航</strong>：包含"活动详情"、"发放明细"、"核销明细"三个标签</li>
            <li><strong>标签页切换</strong>：点击标签可切换不同内容区域</li>
            <li><strong>只读模式</strong>：所有信息均为只读，不可编辑</li>
            <li><strong>操作按钮</strong>：只显示"关闭"按钮</li>
        </ul>
                
        <h3>6.3 标签页内容</h3>
        
        <h4>6.3.1 活动详情标签页</h4>
        <p>显示活动的基本配置信息，按区域分组展示：</p>
        <table>
            <thead>
                <tr>
                    <th>信息区域</th>
                    <th>包含字段</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>基本信息</td>
                    <td>活动优惠券ID、活动名称、主题活动ID、批次号、通道、渠道、报名机构、活动状态、是否在小程序展示</td>
                </tr>
                <tr>
                    <td>时间信息</td>
                    <td>生效时间、失效时间、创建时间、更新时间</td>
                </tr>
                <tr>
                    <td>优惠券配置</td>
                    <td>优惠券类型、优惠金额、使用门槛、发放总量、每人限领、有效期类型、有效天数、使用说明</td>
                </tr>
                <tr>
                    <td>使用规则</td>
                    <td>详细的使用规则说明文本</td>
                </tr>
            </tbody>
        </table>
        
        <h4>6.3.2 发放明细标签页</h4>
        <p>显示优惠券的发放统计和明细数据：</p>
        <ul>
            <li><strong>统计概览</strong>：总发放数量、已核销数量、未核销数量、核销率</li>
            <li><strong>查询筛选</strong>：支持按OpenID、状态、流水号、发放时间筛选</li>
            <li><strong>明细列表</strong>：券ID、主题活动ID、活动优惠券编码、第三方用户编号、会员号、商户订单号、内部订单号、平台流水号、报名机构、关联银行、优惠券类型、券面额、使用门槛、通道、渠道、发放时间、请求结果</li>
            <li><strong>数据导出</strong>：支持下载发放明细数据</li>
            <li><strong>分页显示</strong>：支持分页浏览和每页条数设置</li>
        </ul>
        
        <h4>6.3.3 核销明细标签页</h4>
        <p>显示优惠券的核销统计和明细数据：</p>
        <ul>
            <li><strong>统计概览</strong>：总发放数量、已核销数量、未核销数量、核销率</li>
            <li><strong>查询筛选</strong>：支持按OpenID、状态、流水号、核销时间筛选</li>
            <li><strong>明细列表</strong>：券ID、交易流水号、主题活动ID、第三方用户编号、优惠券类型、核销金额、订单金额、商户编号、发放时间、核销时间、活动优惠券编码、会员号、商户订单号、内部订单号、平台流水号、报名机构、关联银行、通道、渠道、核销状态</li>
            <li><strong>数据导出</strong>：支持下载核销明细数据</li>
            <li><strong>分页显示</strong>：支持分页浏览和每页条数设置</li>
        </ul>
                
        <h3>6.4 标签页切换功能</h3>
        <p>标签页切换功能的技术实现包含CSS样式和JavaScript交互两个部分：</p>
        
        <h3>6.4 样式效果示例</h3>
        <div class="example-section">
            <div class="example-title">状态标签样式示例：</div>
            <p>
                <span class="status-badge status-success">生效</span>
                <span class="status-badge status-danger">失效</span>
            </p>
            
            <div class="example-title">标签页切换示例：</div>
            <div class="tabs">
                <div class="tab-item active" data-tab="details" onclick="switchTab('details')">活动详情</div>
                <div class="tab-item" data-tab="issuance" onclick="switchTab('issuance')">发放明细</div>
                <div class="tab-item" data-tab="verification" onclick="switchTab('verification')">核销明细</div>
            </div>
            
            <div class="tab-content active" id="details-content">
                <p><strong>活动详情内容区域</strong></p>
                <p>显示活动的基本配置信息，包括活动ID、活动名称、主题活动ID等字段。</p>
            </div>
            
            <div class="tab-content" id="issuance-content">
                <p><strong>发放明细内容区域</strong></p>
                <p>显示优惠券的发放统计和明细数据，包括总发放数量、已核销数量等信息。</p>
                
                <h4>发放明细字段说明</h4>
                <table>
                    <thead>
                        <tr>
                            <th>字段名称</th>
                            <th>字段类型</th>
                            <th>字段说明</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>券ID</td>
                            <td>varchar(50)</td>
                            <td>优惠券的唯一标识</td>
                        </tr>
                        <tr>
                            <td>主题活动ID</td>
                            <td>varchar(20)</td>
                            <td>关联主题活动表的活动ID</td>
                        </tr>
                        <tr>
                            <td>活动优惠券编码</td>
                            <td>varchar(50)</td>
                            <td>活动优惠券的编码标识</td>
                        </tr>
                        <tr>
                            <td>第三方用户编号</td>
                            <td>varchar(50)</td>
                            <td>第三方系统的用户标识</td>
                        </tr>
                        <tr>
                            <td>会员号</td>
                            <td>varchar(50)</td>
                            <td>会员系统的会员标识</td>
                        </tr>
                        <tr>
                            <td>商户订单号</td>
                            <td>varchar(50)</td>
                            <td>商户系统的订单号</td>
                        </tr>
                        <tr>
                            <td>内部订单号</td>
                            <td>varchar(50)</td>
                            <td>系统内部生成的订单号</td>
                        </tr>
                        <tr>
                            <td>平台流水号</td>
                            <td>varchar(50)</td>
                            <td>平台交易流水号</td>
                        </tr>
                        <tr>
                            <td>报名机构</td>
                            <td>varchar(50)</td>
                            <td>参与活动的机构名称</td>
                        </tr>
                        <tr>
                            <td>关联银行</td>
                            <td>varchar(50)</td>
                            <td>关联的银行机构</td>
                        </tr>
                        <tr>
                            <td>优惠券类型</td>
                            <td>varchar(20)</td>
                            <td>券的类型：满减券/折扣券/代金券</td>
                        </tr>
                        <tr>
                            <td>券面额</td>
                            <td>decimal(10,2)</td>
                            <td>优惠券的面额金额</td>
                        </tr>
                        <tr>
                            <td>使用门槛</td>
                            <td>decimal(10,2)</td>
                            <td>使用优惠券的最低消费金额</td>
                        </tr>
                        <tr>
                            <td>通道</td>
                            <td>varchar(20)</td>
                            <td>发放通道：云数汇等</td>
                        </tr>
                        <tr>
                            <td>渠道</td>
                            <td>varchar(20)</td>
                            <td>发放渠道：微信/支付宝/云闪付</td>
                        </tr>
                        <tr>
                            <td>发放时间</td>
                            <td>datetime</td>
                            <td>优惠券发放的时间</td>
                        </tr>
                        <tr>
                            <td>请求结果</td>
                            <td>varchar(20)</td>
                            <td>发放请求的处理结果</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="tab-content" id="verification-content">
                <p><strong>核销明细内容区域</strong></p>
                <p>显示优惠券的核销统计和明细数据，包括会员ID、业主ID、银行ID、券面额、订单原始金额、优惠后金额、核销时间、支付流水号等信息。</p>
                
                <h4>核销明细字段说明</h4>
                <table>
                    <thead>
                        <tr>
                            <th>字段名称</th>
                            <th>字段类型</th>
                            <th>字段说明</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>券ID</td>
                            <td>varchar(50)</td>
                            <td>优惠券的唯一标识</td>
                        </tr>
                        <tr>
                            <td>交易流水号</td>
                            <td>varchar(50)</td>
                            <td>核销交易的流水号</td>
                        </tr>
                        <tr>
                            <td>主题活动ID</td>
                            <td>varchar(20)</td>
                            <td>关联主题活动表的活动ID</td>
                        </tr>
                        <tr>
                            <td>第三方用户编号</td>
                            <td>varchar(50)</td>
                            <td>第三方系统的用户标识</td>
                        </tr>
                        <tr>
                            <td>优惠券类型</td>
                            <td>varchar(20)</td>
                            <td>券的类型：满减券/折扣券/代金券</td>
                        </tr>
                        <tr>
                            <td>核销金额</td>
                            <td>decimal(10,2)</td>
                            <td>实际核销的优惠金额</td>
                        </tr>
                        <tr>
                            <td>订单金额</td>
                            <td>decimal(10,2)</td>
                            <td>订单的总金额</td>
                        </tr>
                        <tr>
                            <td>商户编号</td>
                            <td>varchar(50)</td>
                            <td>商户的唯一标识</td>
                        </tr>
                        <tr>
                            <td>发放时间</td>
                            <td>datetime</td>
                            <td>优惠券发放的时间</td>
                        </tr>
                        <tr>
                            <td>核销时间</td>
                            <td>datetime</td>
                            <td>优惠券核销的时间</td>
                        </tr>
                        <tr>
                            <td>活动优惠券编码</td>
                            <td>varchar(50)</td>
                            <td>活动优惠券的编码标识</td>
                        </tr>
                        <tr>
                            <td>会员号</td>
                            <td>varchar(50)</td>
                            <td>会员系统的会员标识</td>
                        </tr>
                        <tr>
                            <td>商户订单号</td>
                            <td>varchar(50)</td>
                            <td>商户系统的订单号</td>
                        </tr>
                        <tr>
                            <td>内部订单号</td>
                            <td>varchar(50)</td>
                            <td>系统内部生成的订单号</td>
                        </tr>
                        <tr>
                            <td>平台流水号</td>
                            <td>varchar(50)</td>
                            <td>平台交易流水号</td>
                        </tr>
                        <tr>
                            <td>报名机构</td>
                            <td>varchar(50)</td>
                            <td>参与活动的机构名称</td>
                        </tr>
                        <tr>
                            <td>关联银行</td>
                            <td>varchar(50)</td>
                            <td>关联的银行机构</td>
                        </tr>
                        <tr>
                            <td>通道</td>
                            <td>varchar(20)</td>
                            <td>核销通道：云数汇等</td>
                        </tr>
                        <tr>
                            <td>渠道</td>
                            <td>varchar(20)</td>
                            <td>核销渠道：微信/支付宝/云闪付</td>
                        </tr>
                        <tr>
                            <td>核销状态</td>
                            <td>varchar(20)</td>
                            <td>核销的状态：成功/失败等</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <h3>6.5 操作流程</h3>
        <div class="workflow-step">
            <div class="step-number">1</div>
            <div>用户在活动列表中点击"查看"按钮</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">2</div>
            <div>系统弹出查看活动详情模态框</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">3</div>
            <div>系统默认显示"活动详情"标签页内容</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">4</div>
            <div>用户可点击"发放明细"或"核销明细"标签切换查看不同内容</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">5</div>
            <div>在发放明细和核销明细标签页中，用户可进行数据筛选和导出操作</div>
        </div>
        <div class="workflow-step">
            <div class="step-number">6</div>
            <div>用户点击"关闭"按钮关闭模态框</div>
        </div>
                
    </section>
    

    
    <section>
        <h2>7. 批量操作功能</h2>
        
        <h3>8.1 功能概述</h3>
        <p>系统支持对多个活动进行批量操作，提高管理效率。批量操作包括批量暂停、批量导出等功能。</p>
        
        <h3>8.2 支持的批量操作</h3>
        <table>
            <thead>
                <tr>
                    <th>操作类型</th>
                    <th>适用状态</th>
                    <th>操作说明</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>批量暂停</td>
                    <td>进行中</td>
                    <td>将选中的进行中活动批量设置为已终止状态</td>
                </tr>
                <tr>
                    <td>批量导出</td>
                    <td>全部</td>
                    <td>导出选中活动的详细信息到Excel文件</td>
                </tr>
            </tbody>
        </table>
    </section>
    
    <section>
        <h2>8. 技术规范</h2>
        
        <h3>8.1 数据字典</h3>
        
        <h4>8.1.1 券活动表（bmt_channel_activity）</h4>
        <table>
            <thead>
                <tr>
                    <th>字段名</th>
                    <th>数据类型</th>
                    <th>长度</th>
                    <th>描述</th>
                    <th>约束</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>id</td>
                    <td>BIGINT</td>
                    <td>-</td>
                    <td>主键，自增</td>
                    <td>非空，主键</td>
                </tr>
                <tr>
                    <td>theme_activity_id</td>
                    <td>VARCHAR</td>
                    <td>20</td>
                    <td>主题活动ID</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>activity_name</td>
                    <td>VARCHAR</td>
                    <td>50</td>
                    <td>活动名称</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>activity_type</td>
                    <td>VARCHAR</td>
                    <td>50</td>
                    <td>活动类型</td>
                    <td>非空</td>
                </tr>
                <tr>
                    <td>batch_no</td>
                    <td>VARCHAR</td>
                    <td>50</td>
                    <td>批次号</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>promotion_id</td>
                    <td>VARCHAR</td>
                    <td>50</td>
                    <td>券活动ID</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>channel_type</td>
                    <td>VARCHAR</td>
                    <td>20</td>
                    <td>渠道类别</td>
                    <td>可空，枚举值：微信/支付宝/云闪付</td>
                </tr>
                <tr>
                    <td>coupon_type</td>
                    <td>VARCHAR</td>
                    <td>20</td>
                    <td>券类别</td>
                    <td>可空，枚举值：满减券/折扣券/代金券</td>
                </tr>
                <tr>
                    <td>start_time</td>
                    <td>DATETIME</td>
                    <td>-</td>
                    <td>活动开始时间</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>end_time</td>
                    <td>DATETIME</td>
                    <td>-</td>
                    <td>活动结束时间</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>promo_amount</td>
                    <td>VARCHAR</td>
                    <td>255</td>
                    <td>券面额</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>order_min_amt</td>
                    <td>VARCHAR</td>
                    <td>20</td>
                    <td>最小使用门槛</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>show_flag</td>
                    <td>VARCHAR</td>
                    <td>20</td>
                    <td>是否在小程序上展示</td>
                    <td>可空，枚举值：Y/N</td>
                </tr>
                <tr>
                    <td>settle_flag</td>
                    <td>VARCHAR</td>
                    <td>20</td>
                    <td>是否结算</td>
                    <td>可空，枚举值：Y/N</td>
                </tr>
                <tr>
                    <td>settle_type</td>
                    <td>VARCHAR</td>
                    <td>20</td>
                    <td>结算方式</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>settle_rate</td>
                    <td>VARCHAR</td>
                    <td>20</td>
                    <td>结算比例</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>description</td>
                    <td>VARCHAR</td>
                    <td>20</td>
                    <td>使用说明</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>valid_type</td>
                    <td>VARCHAR</td>
                    <td>20</td>
                    <td>有效类型</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>valid_days</td>
                    <td>VARCHAR</td>
                    <td>20</td>
                    <td>领取后生效天数</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>status</td>
                    <td>VARCHAR</td>
                    <td>20</td>
                    <td>活动状态</td>
                    <td>可空，枚举值：待开始/进行中/已终止/已结束</td>
                </tr>
                <tr>
                    <td>gmt_create</td>
                    <td>DATETIME</td>
                    <td>-</td>
                    <td>创建时间</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>create_by</td>
                    <td>VARCHAR</td>
                    <td>50</td>
                    <td>创建人</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>gmt_modified</td>
                    <td>DATETIME</td>
                    <td>-</td>
                    <td>修改时间</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>modified_by</td>
                    <td>VARCHAR</td>
                    <td>50</td>
                    <td>修改人</td>
                    <td>可空</td>
                </tr>
            </tbody>
        </table>
        
        <h4>8.1.2 通道发放券详情表（tunnel_coupon_detail）</h4>
        <table>
            <thead>
                <tr>
                    <th>字段名</th>
                    <th>数据类型</th>
                    <th>长度</th>
                    <th>描述</th>
                    <th>约束</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>id</td>
                    <td>BIGINT</td>
                    <td>-</td>
                    <td>主键，自增</td>
                    <td>非空，主键</td>
                </tr>
                <tr>
                    <td>member_id</td>
                    <td>VARCHAR</td>
                    <td>50</td>
                    <td>会员ID（调用方传入，只进行存储）</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>activity_id</td>
                    <td>VARCHAR</td>
                    <td>20</td>
                    <td>活动ID</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>owner_id</td>
                    <td>VARCHAR</td>
                    <td>50</td>
                    <td>业主ID</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>bank_id</td>
                    <td>VARCHAR</td>
                    <td>50</td>
                    <td>银行ID</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>promotion_id</td>
                    <td>VARCHAR</td>
                    <td>50</td>
                    <td>优惠券ID</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>batch_no</td>
                    <td>VARCHAR</td>
                    <td>50</td>
                    <td>批次号</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>tunnel_user_id</td>
                    <td>VARCHAR</td>
                    <td>50</td>
                    <td>渠道用户标识（微信的open_id，支付宝的user_id）</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>mer_order_id</td>
                    <td>VARCHAR</td>
                    <td>50</td>
                    <td>调用方传入的订单号</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>inner_mer_order_id</td>
                    <td>VARCHAR</td>
                    <td>50</td>
                    <td>系统生成的订单号</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>write_off_notify</td>
                    <td>VARCHAR</td>
                    <td>255</td>
                    <td>核销通知地址</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>issuing_status_code</td>
                    <td>VARCHAR</td>
                    <td>20</td>
                    <td>发券响应码</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>issuing_status_msg</td>
                    <td>VARCHAR</td>
                    <td>50</td>
                    <td>发券响应信息</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>third_coupon_id</td>
                    <td>VARCHAR</td>
                    <td>50</td>
                    <td>平台券ID</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>trade_no</td>
                    <td>VARCHAR</td>
                    <td>50</td>
                    <td>平台流水号</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>trade_status</td>
                    <td>VARCHAR</td>
                    <td>20</td>
                    <td>发券状态</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>settle_trade_status</td>
                    <td>VARCHAR</td>
                    <td>20</td>
                    <td>券核销状态</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>consume_time</td>
                    <td>DATETIME</td>
                    <td>-</td>
                    <td>核销时间</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>coupon_amount</td>
                    <td>VARCHAR</td>
                    <td>255</td>
                    <td>券面额</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>order_amount</td>
                    <td>VARCHAR</td>
                    <td>255</td>
                    <td>订单原始金额</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>discount_order_amount</td>
                    <td>VARCHAR</td>
                    <td>255</td>
                    <td>优惠后金额</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>channel_type</td>
                    <td>VARCHAR</td>
                    <td>20</td>
                    <td>渠道类型（支付宝，微信，银联（云闪付）等）</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>tunnel_type</td>
                    <td>VARCHAR</td>
                    <td>20</td>
                    <td>通道类型（拉卡拉，云枢会等）</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>pay_trade_no</td>
                    <td>VARCHAR</td>
                    <td>50</td>
                    <td>支付流水号</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>gmt_create</td>
                    <td>DATETIME</td>
                    <td>-</td>
                    <td>创建时间</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>create_by</td>
                    <td>VARCHAR</td>
                    <td>50</td>
                    <td>创建人</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>gmt_modified</td>
                    <td>DATETIME</td>
                    <td>-</td>
                    <td>修改时间</td>
                    <td>可空</td>
                </tr>
                <tr>
                    <td>modified_by</td>
                    <td>VARCHAR</td>
                    <td>50</td>
                    <td>修改人</td>
                    <td>可空</td>
                </tr>
            </tbody>
        </table>
        
        <h3>8.2 API接口规范</h3>
        <h4>8.2.1 查询活动列表</h4>
        <div class="api-endpoint">GET /api/channel/activities</div>
        <div class="parameter-list">
            <p><strong>请求参数：</strong></p>
            <ul>
                <li>activity_name: 活动名称（可选，VARCHAR(50)）</li>
                <li>theme_activity_id: 主题活动ID（可选，VARCHAR(20)）</li>
                <li>batch_no: 批次号（可选，VARCHAR(50)）</li>
                <li>channel_type: 渠道类别（可选，VARCHAR(20)，枚举值：微信/支付宝/云闪付）</li>
                <li>coupon_type: 券类别（可选，VARCHAR(20)，枚举值：满减券/折扣券/代金券）</li>
                <li>status: 活动状态（可选，VARCHAR(20)，枚举值：待开始/进行中/已终止/已结束）</li>
                <li>start_time: 活动开始时间（可选，DATETIME格式：yyyy-MM-dd HH:mm:ss）</li>
                <li>end_time: 活动结束时间（可选，DATETIME格式：yyyy-MM-dd HH:mm:ss）</li>
                <li>page: 页码（默认1，INT）</li>
                <li>size: 每页大小（默认20，最大100，INT）</li>
            </ul>
            <p><strong>响应示例：</strong></p>
            <pre><code>{
  "code": "200",
  "message": "success",
  "data": {
    "total": 100,
    "page": 1,
    "size": 20,
    "list": [
      {
        "id": 1,
        "theme_activity_id": "ACT001",
        "activity_name": "春节优惠活动",
        "activity_type": "满减活动",
        "batch_no": "BATCH001",
        "promotion_id": "PROMO001",
        "channel_type": "微信",
        "coupon_type": "满减券",
        "start_time": "2024-01-01 00:00:00",
        "end_time": "2024-01-31 23:59:59",
        "promo_amount": "10.00",
        "order_min_amt": "100.00",
        "status": "进行中"
      }
    ]
  }
}</code></pre>
        </div>
        
        <h4>8.2.2 创建活动</h4>
        <div class="api-endpoint">POST /api/channel/activities</div>
        <div class="parameter-list">
            <p><strong>请求体：</strong></p>
            <pre><code>{
  "theme_activity_id": "ACT001",
  "activity_name": "春节优惠活动",
  "activity_type": "满减活动",
  "batch_no": "BATCH001",
  "promotion_id": "PROMO001",
  "channel_type": "微信",
  "coupon_type": "满减券",
  "start_time": "2024-01-01 00:00:00",
  "end_time": "2024-01-31 23:59:59",
  "promo_amount": "10.00",
  "order_min_amt": "100.00",
  "show_flag": "1",
  "settle_flag": "1",
  "settle_type": "比例结算",
  "settle_rate": "0.8",
  "description": "满100减10元优惠券",
  "valid_type": "相对时间",
  "valid_days": "30"
}</code></pre>
            <p><strong>响应示例：</strong></p>
            <pre><code>{
  "code": "200",
  "message": "活动创建成功",
  "data": {
    "id": 1,
    "activity_name": "春节优惠活动"
  }
}</code></pre>
        </div>
        
        <h4>8.2.3 更新活动</h4>
        <div class="api-endpoint">PUT /api/channel/activities/{id}</div>
        <div class="parameter-list">
            <p><strong>请求体：</strong>包含需要更新的字段（与创建接口字段相同）</p>
            <pre><code>{
  "activity_name": "春节优惠活动（更新）",
  "end_time": "2024-02-15 23:59:59",
  "promo_amount": "15.00",
  "description": "满100减15元优惠券"
}</code></pre>
        </div>
        
        <h4>8.2.4 终止活动</h4>
        <div class="api-endpoint">POST /api/channel/activities/{id}/terminate</div>
        <div class="parameter-list">
            <p><strong>请求体：</strong></p>
            <pre><code>{
  "reason": "活动提前结束"
}</code></pre>
        </div>
        
        <h4>8.2.5 查询券发放详情</h4>
        <div class="api-endpoint">GET /api/tunnel/coupon/details</div>
        <div class="parameter-list">
            <p><strong>请求参数：</strong></p>
            <ul>
                <li>activity_id: 活动ID（可选，VARCHAR(20)）</li>
                <li>member_id: 会员ID（可选，VARCHAR(50)）</li>
                <li>promotion_id: 优惠券ID（可选，VARCHAR(50)）</li>
                <li>batch_no: 批次号（可选，VARCHAR(50)）</li>
                <li>trade_status: 发券状态（可选，VARCHAR(20)）</li>
                <li>settle_trade_status: 券核销状态（可选，VARCHAR(20)）</li>
                <li>channel_type: 渠道类型（可选，VARCHAR(20)）</li>
                <li>tunnel_type: 通道类型（可选，VARCHAR(20)）</li>
                <li>start_time: 开始时间（可选，DATETIME）</li>
                <li>end_time: 结束时间（可选，DATETIME）</li>
                <li>page: 页码（默认1）</li>
                <li>size: 每页大小（默认20）</li>
            </ul>
        </div>
        
        <h4>8.2.6 券核销接口</h4>
        <div class="api-endpoint">POST /api/tunnel/coupon/writeoff</div>
        <div class="parameter-list">
            <p><strong>请求体：</strong></p>
            <pre><code>{
  "third_coupon_id": "COUPON123456",
  "trade_no": "TRADE789012",
  "order_amount": "150.00",
  "discount_order_amount": "140.00",
  "pay_trade_no": "PAY345678",
  "consume_time": "2024-01-15 14:30:00"
}</code></pre>
        </div>
        

    </section>
    
    <footer>
        <p>© 2025 联合营销平台 - 活动优惠券管理系统需求说明文档</p>
        <p>文档版本：v1.0 | 最后更新：2025年8月8日</p>
    </footer>
    
    <script>
        // 标签页切换功能
        function switchTab(tabId) {
            // 移除所有标签的active状态
            const allTabs = document.querySelectorAll('.tab-item');
            allTabs.forEach(tab => tab.classList.remove('active'));
            
            // 隐藏所有内容区域
            const allContents = document.querySelectorAll('.tab-content');
            allContents.forEach(content => content.classList.remove('active'));
            
            // 激活当前点击的标签
            const currentTab = document.querySelector(`[data-tab="${tabId}"]`);
            if (currentTab) {
                currentTab.classList.add('active');
            }
            
            // 显示对应的内容区域
            const currentContent = document.getElementById(`${tabId}-content`);
            if (currentContent) {
                currentContent.classList.add('active');
            }
        }
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 确保默认激活第一个标签
            const firstTab = document.querySelector('.tab-item[data-tab="details"]');
            const firstContent = document.getElementById('details-content');
            
            if (firstTab && firstContent) {
                firstTab.classList.add('active');
                firstContent.classList.add('active');
            }
        });
    </script>
</body>
</html>