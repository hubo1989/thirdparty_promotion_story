# 云数惠权益营销平台微信优惠券服务接入项目

## 概述

本项目是云数惠第三方微信优惠券服务接入的完整需求文档和设计资料集合，为合作银行提供统一的微信优惠券发放服务，并在联合营销平台展示相关数据。

## 主要文件

### 需求文档
- **[index.html](index.html)** - 云数惠权益营销平台微信优惠券服务接入需求文档（主文档）
- **[wxpromotionstory.html](wxpromotionstory.html)** - 微信活动管理系统需求文档

### 功能原型
- **[wxpromotionprototype.html](wxpromotionprototype.html)** - 微信活动管理功能原型

## 核心功能

### 1. 优惠券服务
- 接入云数惠第三方微信优惠券服务商
- 封装获取openid的H5页面
- 发券、数据回调、数据查询接口

### 2. 接口封装
- 银行请求我方系统接口（发券接口）
- 我方系统调用云数惠接口
- 回调处理接口（异步架构）
- 数据查询接口封装

### 3. 数据管理
- 按活动编码统计发放成功、核销成功数量
- 详细核销记录管理（基于回调接口更新明细状态）
- 详细发放记录管理（基于发放接口返回结果）

### 4. 后台系统
- 联合营销平台查询功能
- 数据权限隔离（基于bankId）
- 操作日志记录与审计

## 技术架构

### 系统组成
- 云数惠接入层：对接云数惠API
- 业务封装层：封装标准化接口
- 数据存储层：存储发放和核销数据
- 营销平台层：数据展示和权限管理
- 联合营销平台：银行端数据查询

### 接口规范
- 请求格式及加密方式遵循云数惠标准
- 支持发放优惠券、核销回调通知、查询发放结果等核心接口
- 异步回调处理机制确保银行系统通知可靠性

## 业务流程

1. **H5获取OpenID**：银行嵌入云数惠h5地址获取用户openid
2. **优惠券发放**：行方系统调用我方系统发放微信优惠券
3. **核销回调通知**：用户使用优惠券时，通过回调机制通知相关系统
4. **数据查询**：支持实时查询发放结果和核销状态

## 部署与维护

### 环境要求
- 现代浏览器支持（Chrome, Firefox, Safari, Edge等）
- 网络连接正常，可访问云数惠API

### 更新日志
- 持续维护更新中，详见各文档版本记录

---
*最后更新：2025年7月*